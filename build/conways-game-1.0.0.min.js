/*! Conway Game of Life v1.0.0 | Copyright 2013 Lauren Sperber https://github.com/lauren/ease-in/blob/master/LICENSE | 2014-03-06 */
!function(){window.onload=function(){var a=function(a,b){this.columns=a||25,this.rows=b||15,this.cells=this.columns*this.rows,this.container=document.getElementById("petri-dish"),this.cells=[]};a.prototype.createBoard=function(){for(var a=0;a<this.rows;a++){var c=document.createElement("span");c.id="row-"+a,c.className="row",this.container.appendChild(c),this.cells.push([]);for(var d=0;d<this.columns;d++){var e=document.createElement("span");e.id="cell-"+a+"-"+d,e.className="cell",e.setAttribute("data-row",a),e.setAttribute("data-column",d),c.appendChild(e);var f=new b(a,d);f.domCell=e,this.cells[a].push(f)}}},a.prototype.populateBoard=function(){for(var a=0;a<this.cells.length;a++)for(var b=0;b<this.cells[a].length;b++){var c=Math.round(Math.random());1===c&&this.cells[a][b].awaken(),this.cells[a][b].findNeighbors()}},a.prototype.checkNeighborStatus=function(){for(var a=0;a<this.cells.length;a++)for(var b=0;b<this.cells[a].length;b++)this.cells[a][b].liveNeighbors=this.cells[a][b].countLiveNeighbors()},a.prototype.evolve=function(){for(var a=0;a<this.cells.length;a++)for(var b=0;b<this.cells[a].length;b++)3===this.cells[a][b].liveNeighbors?this.cells[a][b].awaken():(this.cells[a][b].liveNeighbors<2||this.cells[a][b].liveNeighbors>3)&&this.cells[a][b].kill()},a.prototype.killBoard=function(){for(var a=0;a<this.cells.length;a++)for(var b=0;b<this.cells[a].length;b++)this.cells[a][b].kill()},a.prototype.clearBoard=function(){this.container.innerHTML=""};var b=function(a,b){this.row=a,this.column=b,this.status=0};b.prototype.awaken=function(){this.status=1,this.domCell.className="cell alive"},b.prototype.kill=function(){this.status=0,this.domCell.className="cell"},b.prototype.findNeighbors=function(){this.neighbors=[],this.addToNeighborsUnlessUndefined(c.cells[this.row][this.column-1]),this.addToNeighborsUnlessUndefined(c.cells[this.row][this.column+1]),this.addAdjacentRowNeighbors(this.row-1),this.addAdjacentRowNeighbors(this.row+1)},b.prototype.addAdjacentRowNeighbors=function(a){c.cells[a]&&(this.addToNeighborsUnlessUndefined(c.cells[a][this.column]),this.addToNeighborsUnlessUndefined(c.cells[a][this.column-1]),this.addToNeighborsUnlessUndefined(c.cells[a][this.column+1]))},b.prototype.addToNeighborsUnlessUndefined=function(a){void 0!==a&&this.neighbors.push(a)},b.prototype.countLiveNeighbors=function(){for(var a=0,b=0;b<this.neighbors.length;b++)"cell alive"===this.neighbors[b].domCell.className&&(a+=1);return a};var c=new a;c.createBoard(),c.populateBoard();var d=setInterval(function(){c.checkNeighborStatus(),c.evolve()},500),e=function(){var b=document.getElementById("board-width").value,e=document.getElementById("board-height").value;clearInterval(d),c.clearBoard(),c=new a(b,e),c.createBoard()};document.getElementById("new-game-button").addEventListener("click",function(){document.getElementById("new-game-form").style.display="block",document.getElementById("new-game-button").style.display="none"}),document.getElementById("board-width").addEventListener("change",function(){e()}),document.getElementById("board-height").addEventListener("change",function(){e()}),document.getElementById("again").addEventListener("click",function(a){a.preventDefault(),clearInterval(d),c.killBoard(),c.populateBoard(),d=setInterval(function(){c.checkNeighborStatus(),c.evolve()},500)})}}();